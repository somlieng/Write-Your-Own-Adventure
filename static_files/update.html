<html lang="en">

<head>

<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!-- Enable Mobile view with viewport meta tag -->
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Title for the page -->
	<title>StoryTree Add New Stories</title>

	<!-- Bootstrap Framework Dependencies -->
	
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

	<!-- Latest compiled JavaScript -->
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

	<script type="text/javascript">
		$(document).ready(function() {
			
			var emailName = localStorage.getItem("email");
			console.log(emailName);
			var $inputEmail = $('#inputEmail');

			if(localStorage.getItem("email") !=null){
				$('#inputEmail').html(localStorage.getItem("email"));
			}

				
            $("#logout").click(function() {
	            localStorage.removeItem("email");
	            window.location.href = "login";
       		});

		$("#delete").click(function() {
		    $.ajax({

		      url: "delete/",
		      type: "POST",
		      dataType : "text", 
		      data : { email: localStorage.getItem("email") },
		      success: function( data ) {
		        console.log("You received some data!", data);

		        if (data == 'OK') {
			        localStorage.removeItem("email");
			        window.location.href = "login";
		        }  

		        else {
		          	$("#status").html("Error: could not delete user!");
		        }
		      },
		    });
		});

		$("#homeLink").click(function() {
			window.location.href = "frontpage";
		});

		$("#newStoryPage").click(function() {
         window.location.href = "new";
        });

        $("#viewProfile").click(function() {
          window.location.href = "profile";
        });


	  $("#updatePassword").click(function() {
	  	if ($("#inputPassword").val() != null && $("#inputPassword").val() != "") {
	  		$("#status").html("Update Successful!");
		    $.ajax({
		      // The URL for the request -- note the simple REST API!
		      // all URLs are relative to http://localhost:3000/
		      url: "updatePassword/",
		      type: "POST",
		      dataType : "text", // this URL returns a plain text string, not JSON
		      data : {  email: localStorage.getItem("email"),
		      			password: $("#inputPassword").val()
		             },
		      success: function( data ) {

		        if (data == 'OK') {

		        } else {
		          $("#status").html("Error: could not update profile!");
		        }
		      },
		    });
		}
		else {
			$("#status").html("Update field cannot be empty!");
		}
	  });

	  $("#updateUserName").click(function() {
	  	if ($("#inputuserName").val() != null && $("#inputuserName").val() != "") {
	  		$("#status").html("Update Successful!");
		    $.ajax({
		      // The URL for the request -- note the simple REST API!
		      // all URLs are relative to http://localhost:3000/
		      url: "updateUsername/",
		      type: "POST",
		      dataType : "text", // this URL returns a plain text string, not JSON
		      data : {  email: localStorage.getItem("email"),
		      			username: $("#inputuserName").val()
		             },
		      success: function( data ) {
		        if (data == 'OK') {

		        } else {
		          $("#status").html("Error: could not update profile!");
		        }
		      },
		    });
		}
		else {
			$("#status").html("Update field cannot be empty!");
		}
	  });

	  $("#updateFirstName").click(function() {
	  	if ($("#inputfirstName").val() != null && $("#inputfirstName").val() != "") {
	  		$("#status").html("Update Successful!");
		    $.ajax({
		      // The URL for the request -- note the simple REST API!
		      // all URLs are relative to http://localhost:3000/
		      url: "updateFirstname/",
		      type: "POST",
		      dataType : "text", // this URL returns a plain text string, not JSON
		      data : {  email: localStorage.getItem("email"),
		      			firstname: $("#inputfirstName").val()
		             },
		      success: function( data ) {
		      	localStorage.setItem("email",storeEmail.value);
		        console.log("You received some data!", data);


		        if (data == 'OK') {

		        } else {
		          $("#status").html("Error: could not update profile!");
		        }
		      },
		    });
		}
		else {
			$("#status").html("Update field cannot be empty!");
		}
	  });

	  $("#updateLastName").click(function() {
	  	if ($("#inputlastName").val() != null && $("#inputlastName").val() != "") {
	  		$("#status").html("Update Successful!");
		    $.ajax({
		      // The URL for the request -- note the simple REST API!
		      // all URLs are relative to http://localhost:3000/
		      url: "updateLastName/",
		      type: "POST",
		      dataType : "text", // this URL returns a plain text string, not JSON
		      data : {  email: localStorage.getItem("email"),
		      			lastname: $("#inputlastName").val()
		             },
		      success: function( data ) {
		      	localStorage.setItem("email",storeEmail.value);
		        console.log("You received some data!", data);


		        if (data == 'OK') {

		        } else {
		          $("#status").html("Error: could not update profile!");
		        }
		      },
		    });
		}
		else {
			$("#status").html("Update field cannot be empty!");
		}
	  });

	});

	</script>

			 
</head>

<body background="trees.jpg">

    <div class="container" style="background-color:white;">

    

      <div class="header clearfix">
        <nav>
          <ul class="nav nav-pills pull-right">
           
            <li role="presentation" id="homeLink"><a href="#">Home</a></li>

            
            <li role="presentation" class="dropdown">
		   
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
		      <span class="glyphicon glyphicon-menu-hamburger"></span>
		    </a>
		    
        <ul class="dropdown-menu dropdown-menu-right">
          <li id="newStoryPage"><a href="#">Add New Story</a></li>
          <li id="viewProfile"><a href="#">View Profile</a></li>
          <li id="updatePage"><a href="#">Update Profile</a></li>
          <li id="logout"><a href="#">Log Out</a></li>
        </ul>
		  </li>

		  <li role="presentation" id="profilePage">
              <a href="#">
              <img border="0" id="profilePicture" src="girls.jpg" width="20" height="20" class="img-circle">
              </a>
            </li>

          </ul>
        </nav>
        
        <h3 class="text-muted">Edit Profile</h3>

        <div id="status" style="color:red;"> </div>

        <div>

        <label for="inputEmail" class="sr-only">Update your email address</label>
		        
		        <h2 id="inputEmail">email</h2> 
		        
		        <br>
		        <label for="inputPassword" class="sr-only">Update your password</label>
		        <input type="password" id="inputPassword" class="form-control" placeholder="Password" required>

		        <br>
		        <button class="btn btn-lg btn-primary btn-block" type="submit" id="updatePassword">Update Password</button>
				<br><br><br>

		        <label for="inputuserName" class="sr-only">Update your username</label>
		        <input type="text" id="inputuserName" class="form-control" placeholder="User Name" required>
		        <br>


		        <button class="btn btn-lg btn-primary btn-block" type="submit" id="updateUserName">Update Username</button>

				<br><br><br>

		        <label for="inputfirstName" class="sr-only">Update your first name</label>
		        <input type="text" id="inputfirstName" class="form-control" placeholder="First Name" required>
		        <br>

		        <button class="btn btn-lg btn-primary btn-block" type="submit" id="updateFirstName">Update First Name</button>
				<br><br><br>

		        <label for="inputlastName" class="sr-only">Update your last name</label>
		        <input type="text" id="inputlastName" class="form-control" placeholder="Last Name" required>
		        <br>

		       <button class="btn btn-lg btn-primary btn-block" type="submit" id="updateLastName">Update Last Name</button>

		       <br><br><br><br><br>

		      <button class="btn btn-danger btn-lg btn-primary btn-block" href="#" role="button" id="delete">Delete Account</button>
        	
        </div>

      </div>


      <footer class="footer">
        <p>&copy; 2015 Company, Inc.</p>
      </footer>

    </div> <!-- /container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

</body>
</html>
	
	